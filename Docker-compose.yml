version: '1-0'
services:
  web_dev:
    ports:
      - "80" 
    volumes:
      - /mnt/apache/dev/:/usr/local/apache2/htdocs/
    build: ./dev/
    limit:
        cpus: 0.1
        memory: 50M

  web_prod:
    ports:
      - "8081"  
    volumes:
      - /mnt/apache/prod/:/usr/local/apache2/htdocs/
    build: ./prod/
    limit:
        cpus: 0.1
        memory: 50M

  load_balancer:
    build:
      context: ./nginx/
      
      limit:
        cpus: 0.1
        memory: 50M
    ports:
      - "80:80"  
